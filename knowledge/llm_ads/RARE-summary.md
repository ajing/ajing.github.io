# RARE: Real-time Ad Retrieval via LLM-Generative Commercial Intention

**Paper**: [arXiv:2504.01304](https://arxiv.org/abs/2504.01304) | [EMNLP 2025](https://aclanthology.org/2025.emnlp-main.1473/)  
**PDF**: [RARE-2504.01304.pdf](./RARE-2504.01304.pdf)  
**Authors**: Tongtong Liu et al. (2025)

---

## TL;DR

RARE uses an LLM to generate **"Commercial Intentions" (CIs)** as an intermediate semantic layer between user queries and ads. This enables real-time, scalable ad retrieval that's deployed in production with **hundreds of millions of daily searches**.

---

## The Problem with Traditional Ad Retrieval

Traditional sponsored search systems rely on:
- **Numeric identifiers** (SKU IDs, product codes)
- **Content-based matching** (keyword overlap)

**Limitations**:
- Semantically inefficient
- Hard to scale across extensive ad catalogs
- Miss user intent nuances

---

## RARE's Solution: Commercial Intentions (CIs)

### What is a Commercial Intention?

A **CI** is a textual representation generated by an LLM that captures the commercial/purchasing intent behind a user query.

```
User Query: "comfortable shoes for standing all day"
     ↓
Commercial Intention: "ergonomic work footwear, cushioned insoles, 
                       standing desk shoes, nurse shoes, retail worker footwear"
     ↓
Ads Retrieved: [Nike Air Max, Crocs Work, Skechers Go Walk, ...]
```

### Key Innovation

- **One CI → Multiple Ads**: Each CI maps to many relevant ads
- **Lightweight Index**: CIs create a compact, scalable index
- **Semantic Bridge**: CIs capture intent better than keywords

---

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    RARE Framework                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [User Query] ──→ [Customized LLM] ──→ [Commercial Intent] │
│                         ↑                      ↓            │
│                    Commercial              CI Index         │
│                    Knowledge               (CI → Ads)       │
│                                                ↓            │
│                                         [Retrieved Ads]     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### The Customized LLM

The LLM is **infused with commercial knowledge**:
- Product catalogs
- Brand information
- Shopping behavior patterns
- Commercial terminology

This makes it generate CIs that are commercially relevant, not just semantically similar.

---

## Production Results

Deployed in a **large-scale online system** with hundreds of millions of daily searches:

| Metric | Improvement |
|--------|-------------|
| **Consumption** | +5.04% |
| **GMV (Gross Merchandise Volume)** | +6.37% |
| **CTR (Click-Through Rate)** | +1.28% |
| **Shallow Conversions** | +5.29% |

These are significant lifts at scale!

---

## Why This Matters for LLM Ads in Chatbots

### Direct Relevance to Our Blog

1. **Fresh Product Information**: RARE shows how to connect LLM responses to real-time ad catalogs—exactly what we need for timely brand info

2. **Commercial Knowledge Injection**: The "customized LLM with commercial knowledge" aligns with our idea of enriching pretraining data with brand info

3. **Semantic Intent Understanding**: CIs capture what users really want to buy, enabling more relevant (less annoying) ads

4. **Production-Validated**: This isn't academic theory—it's running at scale with measurable results

### Key Insight for Character Training

RARE's LLM is trained to understand **commercial intent**, not just language. This is analogous to training a chatbot's "character" to:
- Recognize when a user might benefit from a product recommendation
- Understand brand differentiators
- Generate commercially-aware responses naturally

---

## Comparison with GEM-Bench Approaches

| Aspect | GEM-Bench (AdLLM) | RARE |
|--------|-------------------|------|
| **Focus** | Response generation with ads | Ad retrieval for any system |
| **Ads Location** | Embedded in response | Retrieved separately |
| **LLM Role** | Generate ad-injected text | Generate Commercial Intentions |
| **Production** | Benchmark only | ✅ Deployed at scale |

RARE and GEM-Bench are **complementary**:
- RARE: How to **retrieve** the right ads
- GEM-Bench: How to **integrate** ads into responses

---

## Potential Extensions for Chatbots

1. **CI-Guided Response Generation**: Use Commercial Intentions to guide when/what to recommend
2. **Real-time Product RAG**: Feed RARE-retrieved products into chatbot context
3. **Intent-Aware Character**: Train character to recognize commercial moments

---

## Citation

```bibtex
@inproceedings{liu2025rare,
  title={Real-time Ad Retrieval via LLM-generative Commercial Intention for Sponsored Search Advertising},
  author={Liu, Tongtong and others},
  booktitle={Proceedings of EMNLP 2025},
  year={2025}
}
```

